import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Game2048Swing extends JFrame {

    private GameLogic gameLogic;
    private GameBoardPanel gameBoardPanel; // Changed type
    private JLabel scoreLabel;
    private JButton resetButton;

    public Game2048Swing() {
        gameLogic = new GameLogic();

        setTitle("2048 Game - Swing (Animated)"); // Updated title
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);

        // Top Panel for Score and Reset Button (same as before)
        JPanel topPanel = new JPanel(new BorderLayout());
        scoreLabel = new JLabel("Score: 0", SwingConstants.CENTER);
        scoreLabel.setFont(new Font("Arial", Font.BOLD, 24));
        resetButton = new JButton("New Game");
        resetButton.setFont(new Font("Arial", Font.BOLD, 16));
        resetButton.setFocusable(false);

        resetButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Reset is handled by the gameBoardPanel now
                if (gameBoardPanel != null) {
                    gameBoardPanel.resetGame();
                }
            }
        });

        topPanel.add(scoreLabel, BorderLayout.CENTER);
        topPanel.add(resetButton, BorderLayout.EAST);
        topPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

        // Game Board Panel (Initialization is the same)
        gameBoardPanel = new GameBoardPanel(gameLogic, scoreLabel);

        // Add components to the frame
        add(topPanel, BorderLayout.NORTH);
        add(gameBoardPanel, BorderLayout.CENTER);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);

        SwingUtilities.invokeLater(() -> gameBoardPanel.requestFocusInWindow());
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Game2048Swing();
            }
        });
    }
}